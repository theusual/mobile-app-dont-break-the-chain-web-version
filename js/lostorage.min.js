// Copyright (c) 2012 Florian H., https://github.com/js-coder https://github.com/js-coder/lostorage.js
!function(g,i){var e={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isPlainObj:function(a){return a===Object(a)},toArray:function(a){return Array.prototype.slice.call(a)},prepareArgs:function(a,b){a=e.toArray(a);a.unshift(b);return a},getObjKeyByValue:function(a,b){for(var d in a)if(a.hasOwnProperty(d)&&a[d]===b)return d},prepareReturn:function(a){return g[e.getObjKeyByValue(j,a)]},retrieve:function(a,b){return a===i?b:a},serialize:function(a){return JSON.stringify(a)},unserialize:function(a){return a===i?i:JSON.parse(a)}},c=function(){return c.get.apply(this,arguments)};g.storage=function(){return storage.get.apply(storage,arguments)};g.session=function(){return session.get.apply(session,arguments)};c.set=function(a,b,d){if(e.isPlainObj(b))for(var c in b)b.hasOwnProperty(c)&&a.set(c,b[c]);else a.setItem(b,e.serialize(d));return e.prepareReturn(a)};c.invert=function(a,b){return this.set(a,b,!this.get(a,b))};c.add=function(a,b,d){return this.set(a,b,this.get(a,b)+parseInt(d,10))};c.increase=function(a,b){return this.add(a,b,1)};c.decrease=function(a,b){return this.add(a,b,-1)};c.concat=function(a,b,d){return this.set(a,b,this.get(a,b)+d)};c.push=function(a,b,d){var c=e.toArray(arguments),f=this.get(a,b);c.splice(0,2);f.push.apply(f,c);return this.set(a,b,f)};c.extend=function(a,b,d,c){var f=this.get(a,b,{});if(e.isPlainObj(d))for(var h in d)d.hasOwnProperty(h)&&(f[h]=d[h]);else f[d]=c;return this.set(a,b,f)};c.remove=function(a,b){for(var b=e.isArray(b)?b:e.toArray(arguments),d=0,c=b.length;d<c;d++)delete a[b[d]];return e.prepareReturn(a)};c.empty=function(a){a.clear();return e.prepareReturn(a)};c.get=function(a,b,d){d=d||i;if(e.isArray(b)){for(var c={},f=0,h=b.length;f<h;f++){var g=b[f];c[g]=this.get(a,g,d)}return c}return e.retrieve(e.unserialize(a.getItem(b)),d)};c.all=function(a){return JSON.parse(JSON.stringify(a))};for(var m="set invert add increase decrease concat push extend remove empty get all".split(" "),j={storage:localStorage,session:sessionStorage},l=0,o=m.length;l<o;l++){var n=m[l],k;for(k in j)j.hasOwnProperty(k)&&(g[k][n]=function(a,b){return function(){var d=e.prepareArgs(arguments,b);return c[a].apply(c,d)}}(n,j[k]))}}(window);